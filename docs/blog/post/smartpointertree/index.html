<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css"/><link href="https://fonts.cdnfonts.com/css/sf-mono" rel="stylesheet"/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-87b3a303122f2f0d.js" defer=""></script><script src="/_next/static/chunks/framework-a95b3927b35070c8.js" defer=""></script><script src="/_next/static/chunks/main-396d5c49e8a59a09.js" defer=""></script><script src="/_next/static/chunks/pages/_app-ca9b7cef2b56fb46.js" defer=""></script><script src="/_next/static/chunks/14-c92742101a4cef76.js" defer=""></script><script src="/_next/static/chunks/800-ce247f5639bf3d5d.js" defer=""></script><script src="/_next/static/chunks/pages/blog/post/%5Bkey%5D-17208e01f08aa87e.js" defer=""></script><script src="/_next/static/1GOqkoFr3wKZxHb9UH4Tx/_buildManifest.js" defer=""></script><script src="/_next/static/1GOqkoFr3wKZxHb9UH4Tx/_ssgManifest.js" defer=""></script></head><body><div id="__next"><style data-emotion="css-global iftqeq">html{width:100%;height:100%;margin:0;padding:0;font-family:"Pretendard",sans-serif;font-size:62.5%;}body{width:100%;height:100%;margin:0;padding:0;}#__next{width:100%;height:100%;}</style><style data-emotion="css 11h3v09">.css-11h3v09{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;width:100%;height:100%;color:#1f1f1f;background-color:#ffffff;}</style><div class="css-11h3v09 e12ob6f70"><style data-emotion="css ei8rx5">.css-ei8rx5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;max-width:1000px;}</style><div class="css-ei8rx5 e12ob6f71"><style data-emotion="css 1n0l3qb">.css-1n0l3qb{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;width:100%;padding:22px 24px 10px 24px;}</style><div class="css-1n0l3qb e1dz70rv0"><style data-emotion="css 1bnw8zv">.css-1bnw8zv{font-size:14px;font-weight:500;}</style><div class="css-1bnw8zv">00<!-- -->:<!-- -->00</div><style data-emotion="css 18a0bh6">.css-18a0bh6{margin-left:auto;}</style><style data-emotion="css 128qw07">.css-128qw07{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:17px;height:17px;margin-left:auto;}</style><div class="css-128qw07 e1dz70rv1"><svg width="17" height="17" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity="0.1" d="M8.5 1.417c-3.4 0-6.375 1.487-8.5 3.825l8.5 10.341L17 5.242c-2.125-2.338-5.1-3.825-8.5-3.825Z" fill="#1F1F1F"></path></svg></div><style data-emotion="css 4iefm">.css-4iefm{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:17px;height:17px;}</style><div class="css-4iefm e1dz70rv1"><svg width="17" height="17" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.583 1.417 1.417 15.583h14.166V1.417Z" fill="#1F1F1F"></path></svg></div><div class="css-4iefm e1dz70rv1"><svg width="8" height="15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.5 0h-3v1.5H1c-.552 0-1 .504-1 1.125v11.25C0 14.496.448 15 1 15h6c.552 0 1-.504 1-1.125V2.625C8 2.004 7.552 1.5 7 1.5H5.5V0Z" fill="#1F1F1F" fill-opacity="0.3"></path><path d="M0 8v5.95C0 14.53.448 15 1 15h6c.552 0 1-.47 1-1.05V8H0Z" fill="#1F1F1F"></path></svg></div></div><style data-emotion="css 1plrt3">.css-1plrt3{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;width:100%;padding:18px 20px;}</style><header class="css-1plrt3 ecceavf0"><style data-emotion="css 1j4ubxs">.css-1j4ubxs{cursor:pointer;box-sizing:border-box;border:0;padding:0;color:inherit;background-color:transparent;font-family:inherit;font-size:inherit;width:24px;height:24px;min-width:0;min-height:0;margin-right:auto;}</style><style data-emotion="css hxj3u3">.css-hxj3u3{font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:500;font-size:0.875rem;line-height:1.75;letter-spacing:0.02857em;text-transform:uppercase;min-width:64px;padding:6px 8px;border-radius:4px;-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;color:#1976d2;cursor:pointer;box-sizing:border-box;border:0;padding:0;color:inherit;background-color:transparent;font-family:inherit;font-size:inherit;width:24px;height:24px;min-width:0;min-height:0;margin-right:auto;}.css-hxj3u3:hover{-webkit-text-decoration:none;text-decoration:none;background-color:rgba(25, 118, 210, 0.04);}@media (hover: none){.css-hxj3u3:hover{background-color:transparent;}}.css-hxj3u3.Mui-disabled{color:rgba(0, 0, 0, 0.26);}</style><style data-emotion="css pj48ct">.css-pj48ct{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:500;font-size:0.875rem;line-height:1.75;letter-spacing:0.02857em;text-transform:uppercase;min-width:64px;padding:6px 8px;border-radius:4px;-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;color:#1976d2;cursor:pointer;box-sizing:border-box;border:0;padding:0;color:inherit;background-color:transparent;font-family:inherit;font-size:inherit;width:24px;height:24px;min-width:0;min-height:0;margin-right:auto;}.css-pj48ct::-moz-focus-inner{border-style:none;}.css-pj48ct.Mui-disabled{pointer-events:none;cursor:default;}@media print{.css-pj48ct{-webkit-print-color-adjust:exact;color-adjust:exact;}}.css-pj48ct:hover{-webkit-text-decoration:none;text-decoration:none;background-color:rgba(25, 118, 210, 0.04);}@media (hover: none){.css-pj48ct:hover{background-color:transparent;}}.css-pj48ct.Mui-disabled{color:rgba(0, 0, 0, 0.26);}</style><button class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeMedium MuiButton-textSizeMedium css-pj48ct" tabindex="0" type="button"><svg width="24" height="24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 18h18M3 12h18M3 6h18" stroke="#1F1F1F" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><style data-emotion="css a3xyjy">.css-a3xyjy{z-index:1200;}</style><style data-emotion="css 1j2lmr9 animation-jotq25">.css-1j2lmr9{margin:0;padding:0;text-align:center;-webkit-flex:1;-ms-flex:1;flex:1;font-size:21px;font-weight:700;opacity:0;-webkit-animation:animation-jotq25 0.5s forwards;animation:animation-jotq25 0.5s forwards;}@-webkit-keyframes animation-jotq25{100%{opacity:1;}}@keyframes animation-jotq25{100%{opacity:1;}}</style><h1 class="css-1j2lmr9 ecceavf1">블로그</h1><style data-emotion="css wakbyj">.css-wakbyj{cursor:pointer;box-sizing:border-box;border:0;padding:0;color:inherit;background-color:transparent;font-family:inherit;font-size:inherit;width:24px;height:24px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;min-width:0;min-height:0;margin-left:auto;}</style><style data-emotion="css 1c6gj7b">.css-1c6gj7b{font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:500;font-size:0.875rem;line-height:1.75;letter-spacing:0.02857em;text-transform:uppercase;min-width:64px;padding:6px 8px;border-radius:4px;-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;color:#1976d2;cursor:pointer;box-sizing:border-box;border:0;padding:0;color:inherit;background-color:transparent;font-family:inherit;font-size:inherit;width:24px;height:24px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;min-width:0;min-height:0;margin-left:auto;}.css-1c6gj7b:hover{-webkit-text-decoration:none;text-decoration:none;background-color:rgba(25, 118, 210, 0.04);}@media (hover: none){.css-1c6gj7b:hover{background-color:transparent;}}.css-1c6gj7b.Mui-disabled{color:rgba(0, 0, 0, 0.26);}</style><style data-emotion="css 1va6h6f">.css-1va6h6f{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:500;font-size:0.875rem;line-height:1.75;letter-spacing:0.02857em;text-transform:uppercase;min-width:64px;padding:6px 8px;border-radius:4px;-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;color:#1976d2;cursor:pointer;box-sizing:border-box;border:0;padding:0;color:inherit;background-color:transparent;font-family:inherit;font-size:inherit;width:24px;height:24px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;min-width:0;min-height:0;margin-left:auto;}.css-1va6h6f::-moz-focus-inner{border-style:none;}.css-1va6h6f.Mui-disabled{pointer-events:none;cursor:default;}@media print{.css-1va6h6f{-webkit-print-color-adjust:exact;color-adjust:exact;}}.css-1va6h6f:hover{-webkit-text-decoration:none;text-decoration:none;background-color:rgba(25, 118, 210, 0.04);}@media (hover: none){.css-1va6h6f:hover{background-color:transparent;}}.css-1va6h6f.Mui-disabled{color:rgba(0, 0, 0, 0.26);}</style><button class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeMedium MuiButton-textSizeMedium css-1va6h6f" tabindex="0" type="button"><style data-emotion="css 1i0bw9d">.css-1i0bw9d{font-size:21px;line-height:21px;opacity:1;-webkit-transition:opacity 1s,font-size 0.3s,line-height 0.3s;transition:opacity 1s,font-size 0.3s,line-height 0.3s;}</style><span class="css-1i0bw9d">가</span><style data-emotion="css bah3n2">.css-bah3n2{font-size:12px;line-height:12px;opacity:0.5;-webkit-transition:opacity 1s,font-size 0.3s,line-height 0.3s;transition:opacity 1s,font-size 0.3s,line-height 0.3s;}</style><span class="css-bah3n2">A</span></button></header><style data-emotion="css 1ej2pvw">.css-1ej2pvw{overflow-y:auto;width:100%;-webkit-flex:1;-ms-flex:1;flex:1;}</style><main class="css-1ej2pvw e12ob6f72"><style data-emotion="css 1jldanx">.css-1jldanx{box-sizing:border-box;width:100%;padding:0 21px;}</style><div class="css-1jldanx e13n4kg82"><style data-emotion="css 1rr6krv">.css-1rr6krv{margin-bottom:2px;font-size:20px;font-weight:bold;}</style><div class="css-1rr6krv e13n4kg83">Creating a tree using the smart pointer</div><style data-emotion="css 4osezd">.css-4osezd{margin-bottom:16px;font-size:16px;}</style><div class="css-4osezd e13n4kg84">2021-04-12</div><style data-emotion="css yar54t">.css-yar54t{word-break:break-all;width:100%;margin-bottom:8px;font-size:16px;border-top:1px solid #818181;border-bottom:1px solid #818181;}.css-yar54t h1{font-size:20px;}.css-yar54t h2{font-size:18px;}.css-yar54t h3{font-size:16px;}.css-yar54t ul{padding-left:24px;}.css-yar54t a{cursor:pointer;font-weight:normal;color:#3c4fff;}.css-yar54t table{box-sizing:border-box;border-collapse:collapse;border:1px solid #818181;}.css-yar54t table th,.css-yar54t table td{box-sizing:border-box;padding:8px;border:1px solid #818181;}.css-yar54t code{font-family:"SF Mono",monospace!important;}</style><div class="css-yar54t e13n4kg85"><p>C++에서 트리를 만들때, 스마트 포인터 <style data-emotion="css femo2h">.css-femo2h{box-sizing:border-box;vertical-align:middle;font-size:13px;padding:0 2px;line-height:16px;background-color:rgba(232,232,232,0.7);}</style><code class="css-femo2h e13n4kg80">std::shared_ptr</code>를 활용하면 자식 노드의 메모리 해제를 직접 해주지 않아도 될 뿐만 아니라 여러 트리가 한 노드를 참조하는 상황에서도 알아서 메모리가 해제되도록 할 수 있다.</p>
<p>When creating a tree in C++, if you use the smart pointer <code class="css-femo2h e13n4kg80">std::shared_ptr</code>, you don&#x27;t have to release the memory of each child node directly, and you can let the program to automatically release the memory even when multiple trees refer to one node.</p>
<pre><code class="language-cpp css-femo2h e13n4kg80">#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;sstream&gt;
#include &lt;vector&gt;
#include &lt;memory&gt;

class Node {
public:
    Node(const std::string&amp; name): m_name(name) {
        // Do nothing.
    }

    void print(int level = 0) {
        printThis(level);
        printChilds(level);
    }

    void addChild(const std::shared_ptr&lt;Node&gt;&amp; child) {
        m_childs.push_back(child);
    }

private:
    void printThis(int level) {
        std::stringstream ss;

        for (int i = 0; i &lt; level - 1; i++) {
            ss &lt;&lt; &quot;   &quot;;
        }

        if (level &gt; 0) {
            ss &lt;&lt; &quot;|- &quot;;
        }

        ss &lt;&lt; m_name &lt;&lt; &quot;\n&quot;;
        std::cout &lt;&lt; ss.str();
    }

    void printChilds(int level) {
        for (auto child: m_childs) {
            child-&gt;print(level + 1);
        }
    }

private:
    std::string m_name;
    std::vector&lt;std::shared_ptr&lt;Node&gt;&gt; m_childs;
};
</code></pre>
<p>아래와 같이 트리 두 개를 만들어 보자. 두 트리는 노드 4를 공유한다.</p>
<p>Let&#x27;s create two trees as shown below. The trees share node 4.</p>
<p><strong>Tree</strong></p>
<pre><code class="css-femo2h e13n4kg80">Tree 1: 0 - 1 - 2
            |
            3 - 4 - 5
                |
Tree 2: 6 ------+
                |
                7 - 8
                |
                9 - 10 - 11
</code></pre>
<p><strong>Code</strong></p>
<pre><code class="language-cpp css-femo2h e13n4kg80">int main() {
    std::vector&lt;std::shared_ptr&lt;Node&gt;&gt; nodes;

    for (int i = 0; i &lt;= 11; i++) {
        nodes.push_back(std::make_shared&lt;Node&gt;(std::to_string(i)));
    }

    // Tree 1.
    nodes[0]-&gt;addChild(nodes[1]);
    nodes[0]-&gt;addChild(nodes[3]);
    nodes[1]-&gt;addChild(nodes[2]);
    nodes[3]-&gt;addChild(nodes[4]);
    nodes[4]-&gt;addChild(nodes[5]);

    // Tree 2.
    nodes[6]-&gt;addChild(nodes[4]);
    nodes[6]-&gt;addChild(nodes[7]);
    nodes[6]-&gt;addChild(nodes[9]);
    nodes[7]-&gt;addChild(nodes[8]);
    nodes[9]-&gt;addChild(nodes[10]);
    nodes[10]-&gt;addChild(nodes[11]);

    nodes[0]-&gt;print();
    nodes[6]-&gt;print();

    return 0;
}
</code></pre>
<p>프로그램은 아래와 같은 결과를 출력할 것이다.
<a target="_blank" rel="noreferrer noopener" href="https://valgrind.org/">Valgrind</a>를 사용하여 메모리 누수가 없음을 확인할 수 있다.</p>
<p>The program will print the following output.
You can use <a target="_blank" rel="noreferrer noopener" href="https://valgrind.org/">Valgrind</a> to confirm that there is no memory leak.</p>
<pre><code class="css-femo2h e13n4kg80">0
|- 1
   |- 2
|- 3
   |- 4
      |- 5
6
|- 4
   |- 5
|- 7
   |- 8
|- 9
   |- 10
      |- 11
</code></pre></div><div class="css-4osezd e13n4kg86">카테고리<!-- -->: <style data-emotion="css 1tpbm6x">.css-1tpbm6x{-webkit-text-decoration:none;text-decoration:none;color:inherit;font-family:inherit;font-size:inherit;color:#3c4fff;}</style><a class="css-1tpbm6x e13n4kg87" href="/blog/category/computer/">Computer</a></div><style data-emotion="css vd5och">.css-vd5och{margin-top:32px;margin-bottom:128px;font-size:16px;}</style><div class="css-vd5och">Loading the comments...</div><div id="disqus_thread"></div></div></main></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"key":"smartpointertree","title":"Creating a tree using the smart pointer","time":1618185600000,"category":"Computer","content":"C++에서 트리를 만들때, 스마트 포인터 `std::shared_ptr`를 활용하면 자식 노드의 메모리 해제를 직접 해주지 않아도 될 뿐만 아니라 여러 트리가 한 노드를 참조하는 상황에서도 알아서 메모리가 해제되도록 할 수 있다.\n\nWhen creating a tree in C++, if you use the smart pointer `std::shared_ptr`, you don't have to release the memory of each child node directly, and you can let the program to automatically release the memory even when multiple trees refer to one node.\n\n```cpp\n#include \u003ciostream\u003e\n#include \u003cstring\u003e\n#include \u003csstream\u003e\n#include \u003cvector\u003e\n#include \u003cmemory\u003e\n\nclass Node {\npublic:\n    Node(const std::string\u0026 name): m_name(name) {\n        // Do nothing.\n    }\n\n    void print(int level = 0) {\n        printThis(level);\n        printChilds(level);\n    }\n\n    void addChild(const std::shared_ptr\u003cNode\u003e\u0026 child) {\n        m_childs.push_back(child);\n    }\n\nprivate:\n    void printThis(int level) {\n        std::stringstream ss;\n\n        for (int i = 0; i \u003c level - 1; i++) {\n            ss \u003c\u003c \"   \";\n        }\n\n        if (level \u003e 0) {\n            ss \u003c\u003c \"|- \";\n        }\n\n        ss \u003c\u003c m_name \u003c\u003c \"\\n\";\n        std::cout \u003c\u003c ss.str();\n    }\n\n    void printChilds(int level) {\n        for (auto child: m_childs) {\n            child-\u003eprint(level + 1);\n        }\n    }\n\nprivate:\n    std::string m_name;\n    std::vector\u003cstd::shared_ptr\u003cNode\u003e\u003e m_childs;\n};\n```\n\n아래와 같이 트리 두 개를 만들어 보자. 두 트리는 노드 4를 공유한다.\n\nLet's create two trees as shown below. The trees share node 4.\n\n**Tree**\n\n```\nTree 1: 0 - 1 - 2\n            |\n            3 - 4 - 5\n                |\nTree 2: 6 ------+\n                |\n                7 - 8\n                |\n                9 - 10 - 11\n```\n\n**Code**\n\n```cpp\nint main() {\n    std::vector\u003cstd::shared_ptr\u003cNode\u003e\u003e nodes;\n\n    for (int i = 0; i \u003c= 11; i++) {\n        nodes.push_back(std::make_shared\u003cNode\u003e(std::to_string(i)));\n    }\n\n    // Tree 1.\n    nodes[0]-\u003eaddChild(nodes[1]);\n    nodes[0]-\u003eaddChild(nodes[3]);\n    nodes[1]-\u003eaddChild(nodes[2]);\n    nodes[3]-\u003eaddChild(nodes[4]);\n    nodes[4]-\u003eaddChild(nodes[5]);\n\n    // Tree 2.\n    nodes[6]-\u003eaddChild(nodes[4]);\n    nodes[6]-\u003eaddChild(nodes[7]);\n    nodes[6]-\u003eaddChild(nodes[9]);\n    nodes[7]-\u003eaddChild(nodes[8]);\n    nodes[9]-\u003eaddChild(nodes[10]);\n    nodes[10]-\u003eaddChild(nodes[11]);\n\n    nodes[0]-\u003eprint();\n    nodes[6]-\u003eprint();\n\n    return 0;\n}\n```\n\n프로그램은 아래와 같은 결과를 출력할 것이다.\n[Valgrind](https://valgrind.org/)를 사용하여 메모리 누수가 없음을 확인할 수 있다.\n\nThe program will print the following output.\nYou can use [Valgrind](https://valgrind.org/) to confirm that there is no memory leak.\n\n```\n0\n|- 1\n   |- 2\n|- 3\n   |- 4\n      |- 5\n6\n|- 4\n   |- 5\n|- 7\n   |- 8\n|- 9\n   |- 10\n      |- 11\n```\n"}},"__N_SSG":true},"page":"/blog/post/[key]","query":{"key":"smartpointertree"},"buildId":"1GOqkoFr3wKZxHb9UH4Tx","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>