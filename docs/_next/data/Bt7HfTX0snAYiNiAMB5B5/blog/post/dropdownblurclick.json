{"pageProps":{"output":{"title":"Mixing blur event and click event","time":1643328000000,"category":"Computer","content":"<p>드롭다운 같은 커스텀 UI를 만들 때 겪을 수 있는 이슈가 있다.\n<code>onClick()</code>을 사용해서 드롭다운의 옵션을 클릭하면 값이 바뀌며,\n<code>onBlur()</code>를 사용해서 드롭다운 밖을 클릭하면 드롭다운이 닫히게 하고 싶다고 하자.</p>\n<p>There is an issue we can face when creating custom UIs like dropdowns.\nSuppose that you want to change the current value by attaching <code>onClick()</code> on the option buttons,\nand you want to close the dropdown by clicking outside the dropdown by attaching <code>onBlur()</code> on the container.</p>\n<ul>\n<li>Container -&gt; onBlur(): Close the dropdown if it is open<ul>\n<li>Value button</li>\n<li>Option group<ul>\n<li>Option 1 -&gt; onClick(): Updates the current value</li>\n<li>Option 2</li>\n<li>Option 3</li>\n<li>...</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>이 때 드롭다운의 옵션을 클릭해도 값이 바뀌지 않는 경우가 있다.\n이는 <code>onBlur()</code> 때문에 드롭다운이 <code>onClick()</code>이 불리기도 전에 닫혀버리기 때문이다.</p>\n<p>Sometimes the value does not change when you click the option in the dropdown.\nThis is because <code>onBlur()</code> closes the dropdown <strong>before</strong> <code>onClick()</code> is called.</p>\n<p>이는 하위의 <code>onMouseDown()</code>으로 <code>preventDefault()</code>를 날려서 상위에 마우스 이벤트가 안 가게 하는 방법으로 막을 수 있다.</p>\n<p>You can prevent that issue by attaching <code>onMouseDown()</code> to the option buttons and let them call <code>preventDefault()</code> to prevent the mouse event from going to the upper level.</p>\n<ul>\n<li>Container -&gt; onBlur(): Close the dropdown if it is open<ul>\n<li>Value button</li>\n<li>Option group<ul>\n<li>Option 1 -&gt; onClick(): Updates the current value / onMouseDown(): Prevents <strong>event bubbling</strong></li>\n<li>Option 2</li>\n<li>Option 3</li>\n<li>...</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\"  href=\"https://codesandbox.io/s/dropdown-onblur-issue-zcnfr?file=/src/App.tsx\">데모</a>에서 <code>onOptionMouseDown()</code>의 <code>event.preventDefault()</code>를 주석처리해보면 옵션을 클릭해도 값이 바뀌지 않음을 알 수 있다.</p>\n<p>If we comment out <code>event.preventDefault()</code> inside <code>onOptionMousedown()</code> in the <a target=\"_blank\" rel=\"noopener noreferrer\"  href=\"https://codesandbox.io/s/dropdown-onblur-issue-zcnfr?file=/src/App.tsx\">demo</a>, the option buttons will not work.</p>\n"}},"__N_SSG":true}