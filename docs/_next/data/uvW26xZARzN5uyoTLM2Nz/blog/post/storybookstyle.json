{"pageProps":{"postKey":"storybookstyle","post":{"title":"Loader conflict in Storybook Webpack configuration","time":1644019200000,"category":"Computer","content":"[Storybook](https://storybook.js.org/)을 사용할 때 Storybook의 기본 Webpack 세팅에 나의 세팅을 합쳐서 사용하는 경우가 있다.\n\nWe sometimes merge our Webpack configuration to the default Storybook Webpack configuration when we use [Storybook](https://storybook.js.org/).\n\n```JavaScript\n// ex. .storybook/main.js\n\nconst createOurConfig = require('../webpack.config.js');\n\nconst ourConfig = createOurConfig();\n\nmodule.exports = {\n    ...,\n    webpackFinal: config => {\n        config.resolve = {\n            ...config.resolve,\n            ...ourConfig.resolve\n        };\n\n        config.module.rules = [\n            ...config.module.rules,\n            ...ourConfig.module.rules\n        ];\n\n        return config;\n    }\n};\n```\n\n이 때 기본 Webpack 세팅에 css-loader 등의 스타일 세팅을 합치면 빌드 시 에러가 나는 경우가 있다.\n\n이는 기본 Webpack 세팅에 이미 스타일 관련 loader들이 들어있어 이미 변환이 된 결과물에 나의 loader들이 적용되기 때문이다.\n이 문제는 아래와 같이 기본 loader들을 제거해주고 (ex. 정규 표현식에 css가 들어가는 것들만 제외) 나의 loader들을 쓰도록 하는 방법으로 해결 가능하다.\n\nIf we merge our style configuration such as css-loader, we sometimes get the errors.\n\nThe reasons is Storybook's default Webpack configuration already defines the loaders related to style.\nWe can solve that problem by excluding the those loaders (ex. Exclude the loaders whose regex includes 'css') and using our loaders instead.\n\n```JavaScript\n// ex. .storybook/main.js\n\nconst createOurConfig = require('../webpack.config.js');\n\nconst ourConfig = createOurConfig();\n\nmodule.exports = {\n    ...,\n    webpackFinal: config => {\n        config.resolve = {\n            ...config.resolve,\n            ...ourConfig.resolve\n        };\n\n        config.module.rules = [\n            // Exclude default style rules.\n            ...config.module.rules.filter(rule => !rule.test.toString().includes('css')),\n            ...ourConfig.module.rules\n        ];\n\n        return config;\n    }\n};\n```\n\n\n"}},"__N_SSG":true}