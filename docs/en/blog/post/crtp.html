<!DOCTYPE html><html lang="ko" class="m-0 h-full w-full p-0 font-sans"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/f81b53168bed0ade.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-5f8259d795d78687.js"/><script src="/_next/static/chunks/0eb9b0f6-835f6871f50648cc.js" async=""></script><script src="/_next/static/chunks/417-bb771389cd61a9c0.js" async=""></script><script src="/_next/static/chunks/main-app-5076d6c7690900cf.js" async=""></script><script src="/_next/static/chunks/app/layout-5d369154124a380d.js" async=""></script><script src="/_next/static/chunks/66a21e36-9320fd4f2767de8c.js" async=""></script><script src="/_next/static/chunks/79-121b1482e66f2415.js" async=""></script><script src="/_next/static/chunks/568-94d199cce9c2ce6e.js" async=""></script><script src="/_next/static/chunks/app/%5Blocale%5D/blog/post/%5Bkey%5D/page-39ba752fa4b62049.js" async=""></script><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""/><title>CRTP (Curiously Recurring Template Pattern)</title><link rel="stylesheet" as="style" crossorigin="" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard-dynamic-subset.min.css"/><link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300..700&amp;display=swap" rel="stylesheet"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="m-0 h-full w-full p-0"><style>#nprogress{pointer-events:none}#nprogress .bar{background:#d6d6d6;position:fixed;z-index:1600;top: 0;left:0;width:100%;height:3px}#nprogress .peg{display:block;position:absolute;right:0;width:100px;height:100%;;opacity:1;-webkit-transform:rotate(3deg) translate(0px,-4px);-ms-transform:rotate(3deg) translate(0px,-4px);transform:rotate(3deg) translate(0px,-4px)}#nprogress .spinner{display:block;position:fixed;z-index:1600;top: 15px;right:15px}#nprogress .spinner-icon{width:18px;height:18px;box-sizing:border-box;border:2px solid transparent;border-top-color:#d6d6d6;border-left-color:#d6d6d6;border-radius:50%;-webkit-animation:nprogress-spinner 400ms linear infinite;animation:nprogress-spinner 400ms linear infinite}.nprogress-custom-parent{overflow:hidden;position:relative}.nprogress-custom-parent #nprogress .bar,.nprogress-custom-parent #nprogress .spinner{position:absolute}@-webkit-keyframes nprogress-spinner{0%{-webkit-transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg)}}@keyframes nprogress-spinner{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}</style><div class="flex h-full w-full flex-col items-center overflow-y-auto bg-background pt-16 text-primary"><div class="w-full max-w-screen-lg px-6"><div class="w-full"><header class="mb-4 flex w-full flex-row items-center"><h1 class="m-0 mr-auto p-0 font-mono text-3xl font-normal md:text-4xl">Blog</h1><div class="relative"><button class="font-mono text-base hover:text-yellow">&lt;Menu/&gt;</button><div class="absolute right-0 z-10 origin-top-right scale-0 bg-background font-mono text-base text-primary [transition:transform_200ms,opacity_150ms] scale-0 opacity-0"><div class="px-2 py-0.5 whitespace-pre">+<!-- -->------------------<!-- -->+</div><button class="group relative block px-2 py-0.5 whitespace-pre font-mono text-base leading-tight tracking-[normal] text-primary">|                  |<span class="absolute left-7 top-1/2 -translate-y-1/2 group-hover:text-yellow">&lt;Home/&gt;</span></button><button class="group relative block px-2 py-0.5 whitespace-pre font-mono text-base leading-tight tracking-[normal] text-primary">|                  |<span class="absolute left-7 top-1/2 -translate-y-1/2 group-hover:text-yellow">&lt;Projects/&gt;</span></button><button class="group relative block px-2 py-0.5 whitespace-pre font-mono text-base leading-tight tracking-[normal] text-primary">|                  |<span class="absolute left-7 top-1/2 -translate-y-1/2 group-hover:text-yellow">&lt;Musics/&gt;</span></button><button class="group relative block px-2 py-0.5 whitespace-pre font-mono text-base leading-tight tracking-[normal] text-primary">|                  |<span class="absolute left-7 top-1/2 -translate-y-1/2 group-hover:text-yellow">&lt;Art/&gt;</span></button><button class="group relative block px-2 py-0.5 whitespace-pre font-mono text-base leading-tight tracking-[normal] text-primary">|                  |<span class="absolute left-7 top-1/2 -translate-y-1/2 group-hover:text-yellow">&lt;Blog/&gt;</span></button><div class="px-2 py-0.5 whitespace-pre">+<!-- -->------------------<!-- -->+</div><button class="group relative block px-2 py-0.5 whitespace-pre font-mono text-base leading-tight tracking-[normal] text-primary">|                  |<span class="absolute left-7 top-1/2 -translate-y-1/2 group-hover:text-yellow">한국어()</span></button><div class="px-2 py-0.5 whitespace-pre">+<!-- -->------------------<!-- -->+</div><button class="group relative block px-2 py-0.5 whitespace-pre font-mono text-base leading-tight tracking-[normal] text-primary">|                  |<span class="absolute left-7 top-1/2 -translate-y-1/2 group-hover:text-yellow">v1()</span></button><button class="group relative block px-2 py-0.5 whitespace-pre font-mono text-base leading-tight tracking-[normal] text-primary">|                  |<span class="absolute left-7 top-1/2 -translate-y-1/2 group-hover:text-yellow">v2()</span></button><div class="px-2 py-0.5 whitespace-pre">+<!-- -->------------------<!-- -->+</div></div></div></header><div class="mb-4 w-full border-b-2 border-dashed border-gray pb-4"><h2 class="m-0 p-0 text-xl">CRTP (Curiously Recurring Template Pattern)</h2><div class="text-gray">2021-06-10</div></div><div class="mb-2 break-all text-base [&amp;_a]:cursor-pointer [&amp;_a]:font-normal [&amp;_code]:font-mono [&amp;_h1]:my-4 [&amp;_h1]:text-xl [&amp;_h1]:font-bold [&amp;_h2]:my-4 [&amp;_h2]:text-lg [&amp;_h2]:font-semibold [&amp;_h3]:my-4 [&amp;_h3]:text-base [&amp;_li]:list-disc [&amp;_p]:my-4 [&amp;_pre]:my-4 [&amp;_table]:border-collapse [&amp;_table]:border-2 [&amp;_table]:border-solid [&amp;_table]:border-gray [&amp;_td]:border-2 [&amp;_td]:border-solid [&amp;_td]:border-gray [&amp;_th]:border-2 [&amp;_th]:border-solid [&amp;_th]:border-gray [&amp;_th]:p-[8px] [&amp;_ul]:pl-6"><p>C++에서 <strong>CRTP</strong>(묘하게 되풀이되는 템플릿 패턴, Curiously Recurring Template Pattern)라는 재미있는 트릭이 있다.
부모 클래스를 템플릿 클래스로 만들고 자식 클래스가 자기 자신을 템플릿 인수로 넣어 부모 클래스에서 자식 클래스를 사용할 수 있게 하는 트릭이다.</p>
<p>There&#x27;s a fun trick in C++ called CRTP (Curiously Recurring Template Pattern).
The trick is to enable the parent class to use the child class by making the parent class a template class and let the child class to pass itself as a template argument.</p>
<pre><pre style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-cpp" style="white-space:pre;color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#569CD6">template</span><span> </span><span class="token" style="color:#d4d4d4">&lt;</span><span class="token" style="color:#569CD6">typename</span><span> </span><span class="token" style="color:#4ec9b0">Derived</span><span class="token" style="color:#d4d4d4">&gt;</span><span>
</span><span></span><span class="token" style="color:#569CD6">class</span><span> </span><span class="token" style="color:#4ec9b0">MyBase</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">.</span><span class="token" style="color:#d4d4d4">.</span><span class="token" style="color:#d4d4d4">.</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span></span><span class="token" style="color:#569CD6">class</span><span> </span><span class="token" style="color:#4ec9b0">MyDerived</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token base-clause" style="color:#569CD6">public</span><span class="token base-clause"> </span><span class="token base-clause" style="color:#4ec9b0">MyBase</span><span class="token base-clause" style="color:#d4d4d4">&lt;</span><span class="token base-clause" style="color:#4ec9b0">Derived</span><span class="token base-clause" style="color:#d4d4d4">&gt;</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">.</span><span class="token" style="color:#d4d4d4">.</span><span class="token" style="color:#d4d4d4">.</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">;</span></code></pre></pre>
<p>이 트릭을 이용하면 아래와 같이 싱글톤 베이스 클래스를 제작할 수 있다.
자식 클래스에서 <code class="bg-gray bg-opacity-20 pl-[2px] pr-[2px] align-middle text-sm leading-none undefined">getInstance()</code>를 굳이 만들 필요 없이 싱글톤 베이스 클래스를 상속받고 생성자만 구현해주면 된다.
개인적으로 안정성이 중요한 프로그램들에서 싱글톤들의 라이프사이클을 일괄적으로 관리하고 싶을때 매우 유용하지 않을까 생각한다.</p>
<p>Using this trick, you can create a singleton base class like below.
The child class doesn&#x27;t have to create its own <code class="bg-gray bg-opacity-20 pl-[2px] pr-[2px] align-middle text-sm leading-none undefined">getInstance()</code>. I just need to inherit the singleton base class and implement its constructor.
Personally, I think it would be very useful when you want to manage the lifecycle of singletons in the programs where stability is important.</p>
<pre><pre style="color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;background:#1e1e1e"><code class="language-cpp" style="white-space:pre;color:#d4d4d4;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#569CD6">template</span><span> </span><span class="token" style="color:#d4d4d4">&lt;</span><span class="token" style="color:#569CD6">typename</span><span> </span><span class="token" style="color:#4ec9b0">Derived</span><span class="token" style="color:#d4d4d4">&gt;</span><span>
</span><span></span><span class="token" style="color:#569CD6">class</span><span> </span><span class="token" style="color:#4ec9b0">Singleton</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span></span><span class="token" style="color:#569CD6">public</span><span class="token" style="color:#d4d4d4">:</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">static</span><span> </span><span class="token" style="color:#569CD6">const</span><span> Derived</span><span class="token" style="color:#d4d4d4">*</span><span> </span><span class="token" style="color:#dcdcaa">getInstance</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>        </span><span class="token" style="color:#569CD6">if</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>m_instance </span><span class="token" style="color:#d4d4d4">==</span><span> </span><span class="token" style="color:#569CD6">nullptr</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>            </span><span class="token" style="color:#6a9955">// Call the constructor of the child class (by using CRTP).</span><span>
</span><span>            m_instance </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#dcdcaa">Derived</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>        </span><span class="token" style="color:#d4d4d4">}</span><span>
</span>
<span>        </span><span class="token" style="color:#569CD6">return</span><span> m_instance</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">}</span><span>
</span>
<span></span><span class="token" style="color:#569CD6">private</span><span class="token" style="color:#d4d4d4">:</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">static</span><span> Derived</span><span class="token" style="color:#d4d4d4">*</span><span> m_instance</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span></span><span class="token" style="color:#569CD6">template</span><span> </span><span class="token" style="color:#d4d4d4">&lt;</span><span class="token" style="color:#569CD6">typename</span><span> </span><span class="token" style="color:#4ec9b0">Derived</span><span class="token" style="color:#d4d4d4">&gt;</span><span>
</span><span>Derived</span><span class="token" style="color:#d4d4d4">*</span><span> Singleton</span><span class="token" style="color:#d4d4d4">&lt;</span><span>Derived</span><span class="token" style="color:#d4d4d4">&gt;</span><span class="token double-colon" style="color:#d4d4d4">::</span><span>m_instance </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#569CD6">nullptr</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span></span><span class="token" style="color:#569CD6">class</span><span> </span><span class="token" style="color:#4ec9b0">Manager</span><span> </span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token base-clause" style="color:#569CD6">public</span><span class="token base-clause"> </span><span class="token base-clause" style="color:#4ec9b0">Singleton</span><span class="token base-clause" style="color:#d4d4d4">&lt;</span><span class="token base-clause" style="color:#4ec9b0">Manager</span><span class="token base-clause" style="color:#d4d4d4">&gt;</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span></span><span class="token" style="color:#569CD6">public</span><span class="token" style="color:#d4d4d4">:</span><span>
</span><span>    </span><span class="token" style="color:#dcdcaa">Manager</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>        m_status </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#ce9178">&quot;Manager is created!&quot;</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">}</span><span>
</span>
<span></span><span class="token" style="color:#569CD6">public</span><span class="token" style="color:#d4d4d4">:</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">const</span><span> std</span><span class="token double-colon" style="color:#d4d4d4">::</span><span>string</span><span class="token" style="color:#d4d4d4">&amp;</span><span> </span><span class="token" style="color:#dcdcaa">getStatus</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569CD6">const</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>        </span><span class="token" style="color:#569CD6">return</span><span> m_status</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">}</span><span>
</span>
<span></span><span class="token" style="color:#569CD6">private</span><span class="token" style="color:#d4d4d4">:</span><span>
</span><span>    std</span><span class="token double-colon" style="color:#d4d4d4">::</span><span>string m_status</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">;</span></code></pre></pre></div><div class="my-4 w-full border-b-2 border-dashed border-gray"></div><div class="mb-32 mt-8 text-base">Loading the comments...</div><div id="disqus_thread"></div></div></div><div class="h-32 w-full shrink-0"></div></div><script src="/_next/static/chunks/webpack-5f8259d795d78687.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[7628,[\"177\",\"static/chunks/app/layout-5d369154124a380d.js\"],\"\"]\n3:I[9888,[],\"\"]\n4:I[9750,[],\"\"]\n6:I[977,[],\"OutletBoundary\"]\n8:I[977,[],\"MetadataBoundary\"]\na:I[977,[],\"ViewportBoundary\"]\nc:I[9375,[],\"\"]\n:HL[\"/_next/static/css/f81b53168bed0ade.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"XOqaZJiAFj7n3m_gH_73R\",\"p\":\"\",\"c\":[\"\",\"en\",\"blog\",\"post\",\"crtp\"],\"i\":false,\"f\":[[[\"\",{\"children\":[[\"locale\",\"en\",\"d\"],{\"children\":[\"blog\",{\"children\":[\"post\",{\"children\":[[\"key\",\"crtp\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/f81b53168bed0ade.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"ko\",\"className\":\"m-0 h-full w-full p-0 font-sans\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"link\",null,{\"rel\":\"stylesheet\",\"as\":\"style\",\"crossOrigin\":\"\",\"href\":\"https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard-dynamic-subset.min.css\"}],[\"$\",\"link\",null,{\"rel\":\"preconnect\",\"href\":\"https://fonts.googleapis.com\"}],[\"$\",\"link\",null,{\"rel\":\"preconnect\",\"href\":\"https://fonts.gstatic.com\",\"crossOrigin\":\"\"}],[\"$\",\"link\",null,{\"href\":\"https://fonts.googleapis.com/css2?family=Fira+Code:wght@300..700\u0026display=swap\",\"rel\":\"stylesheet\"}]]}],[\"$\",\"body\",null,{\"className\":\"m-0 h-full w-full p-0\",\"children\":[[\"$\",\"$L2\",null,{\"color\":\"#d6d6d6\",\"showSpinner\":false,\"shadow\":false}],[\"$\",\"div\",null,{\"className\":\"flex h-full w-full flex-col items-center overflow-y-auto bg-background pt-16 text-primary\",\"children\":[[\"$\",\"div\",null,{\"className\":\"w-full max-w-screen-lg px-6\",\"children\":[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[],[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}],[\"$\",\"div\",null,{\"className\":\"h-32 w-full shrink-0\"}]]}]]}]]}]]}],{\"children\":[[\"locale\",\"en\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"$0:f:0:1:2:children:0\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"blog\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"$0:f:0:1:2:children:0\",\"children\",\"blog\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"post\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"$0:f:0:1:2:children:0\",\"children\",\"blog\",\"children\",\"post\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"key\",\"crtp\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"$0:f:0:1:2:children:0\",\"children\",\"blog\",\"children\",\"post\",\"children\",\"$0:f:0:1:2:children:2:children:2:children:2:children:0\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L5\",null,[\"$\",\"$L6\",null,{\"children\":\"$L7\"}]]}],{},null,false]},null,false]},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"eLWtsTjwJ47LE8AYp91CB\",{\"children\":[[\"$\",\"$L8\",null,{\"children\":\"$L9\"}],[\"$\",\"$La\",null,{\"children\":\"$Lb\"}],null]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$c\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"d:I[1357,[\"899\",\"static/chunks/66a21e36-9320fd4f2767de8c.js\",\"79\",\"static/chunks/79-121b1482e66f2415.js\",\"568\",\"static/chunks/568-94d199cce9c2ce6e.js\",\"253\",\"static/chunks/app/%5Blocale%5D/blog/post/%5Bkey%5D/page-39ba752fa4b62049.js\"],\"default\"]\ne:I[149,[\"899\",\"static/chunks/66a21e36-9320fd4f2767de8c.js\",\"79\",\"static/chunks/79-121b1482e66f2415.js\",\"568\",\"static/chunks/568-94d199cce9c2ce6e.js\",\"253\",\"static/chunks/app/%5Blocale%5D/blog/post/%5Bkey%5D/page-39ba752fa4b62049.js\"],\"default\"]\n10:I[6879,[\"899\",\"static/chunks/66a21e36-9320fd4f2767de8c.js\",\"79\",\"static/chunks/79-121b1482e66f2415.js\",\"568\",\"static/chunks/568-94d199cce9c2ce6e.js\",\"253\",\"static/chunks/app/%5Blocale%5D/blog/post/%5Bkey%5D/page-39ba752fa4b62049.js\"],\"default\"]\nf:T874,"])</script><script>self.__next_f.push([1,"C++에서 **CRTP**(묘하게 되풀이되는 템플릿 패턴, Curiously Recurring Template Pattern)라는 재미있는 트릭이 있다.\n부모 클래스를 템플릿 클래스로 만들고 자식 클래스가 자기 자신을 템플릿 인수로 넣어 부모 클래스에서 자식 클래스를 사용할 수 있게 하는 트릭이다.\n\nThere's a fun trick in C++ called CRTP (Curiously Recurring Template Pattern).\nThe trick is to enable the parent class to use the child class by making the parent class a template class and let the child class to pass itself as a template argument.\n\n```cpp\ntemplate \u003ctypename Derived\u003e\nclass MyBase {\n    ...\n};\n\nclass MyDerived: public MyBase\u003cDerived\u003e {\n    ...\n};\n```\n\n이 트릭을 이용하면 아래와 같이 싱글톤 베이스 클래스를 제작할 수 있다.\n자식 클래스에서 `getInstance()`를 굳이 만들 필요 없이 싱글톤 베이스 클래스를 상속받고 생성자만 구현해주면 된다.\n개인적으로 안정성이 중요한 프로그램들에서 싱글톤들의 라이프사이클을 일괄적으로 관리하고 싶을때 매우 유용하지 않을까 생각한다.\n\nUsing this trick, you can create a singleton base class like below.\nThe child class doesn't have to create its own `getInstance()`. I just need to inherit the singleton base class and implement its constructor.\nPersonally, I think it would be very useful when you want to manage the lifecycle of singletons in the programs where stability is important.\n\n```cpp\ntemplate \u003ctypename Derived\u003e\nclass Singleton {\npublic:\n    static const Derived* getInstance() {\n        if (m_instance == nullptr) {\n            // Call the constructor of the child class (by using CRTP).\n            m_instance = new Derived();\n        }\n\n        return m_instance;\n    }\n\nprivate:\n    static Derived* m_instance;\n};\n\ntemplate \u003ctypename Derived\u003e\nDerived* Singleton\u003cDerived\u003e::m_instance = nullptr;\n\nclass Manager : public Singleton\u003cManager\u003e {\npublic:\n    Manager() {\n        m_status = \"Manager is created!\";\n    }\n\npublic:\n    const std::string\u0026 getStatus() const {\n        return m_status;\n    }\n\nprivate:\n    std::string m_status;\n};\n```\n"])</script><script>self.__next_f.push([1,"5:[\"$\",\"div\",null,{\"className\":\"w-full\",\"children\":[[\"$\",\"header\",null,{\"className\":\"mb-4 flex w-full flex-row items-center\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"m-0 mr-auto p-0 font-mono text-3xl font-normal md:text-4xl\",\"children\":\"Blog\"}],[\"$\",\"$Ld\",null,{}]]}],[\"$\",\"div\",null,{\"className\":\"mb-4 w-full border-b-2 border-dashed border-gray pb-4\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"m-0 p-0 text-xl\",\"children\":\"CRTP (Curiously Recurring Template Pattern)\"}],[\"$\",\"div\",null,{\"className\":\"text-gray\",\"children\":\"2021-06-10\"}]]}],[\"$\",\"$Le\",null,{\"post\":{\"key\":\"crtp\",\"title\":\"CRTP (Curiously Recurring Template Pattern)\",\"time\":1623283200000,\"category\":\"Computer\",\"content\":\"$f\"}}],[\"$\",\"div\",null,{\"className\":\"my-4 w-full border-b-2 border-dashed border-gray\"}],[\"$\",\"$L10\",null,{\"shortname\":\"Avantgarde95\",\"config\":{\"url\":\"https://avantgarde95.github.io/blog/crtp\",\"identifier\":\"CRTP (Curiously Recurring Template Pattern)\",\"title\":\"CRTP (Curiously Recurring Template Pattern)\"}}]]}]\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"9:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"CRTP (Curiously Recurring Template Pattern)\"}]]\n"])</script><script>self.__next_f.push([1,"7:null\n"])</script></body></html>